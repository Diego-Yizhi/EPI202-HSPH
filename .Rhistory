data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(exponentiate = T, conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
(log_model_ful_emm <- glm(dead_cat~sedentary*dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(exponentiate = T, conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
(log_model_ful_emm <- glm(dead_cat~sedentary*dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
mutate(across(where(is.numeric), round, digits = 3)))
(log_model_ful_emm <- glm(dead_cat~sedentary*dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
(log_model_ful <- glm(dead_cat~sedentary+dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
5*log_model_ful[6,2]
5*-0.064
(log_model_ful <- glm(dead_cat~sedentary+dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(exponentiate = T, conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
exp(-0.32)
-0.071*5
-0.057*5
exp(-0.355)
exp(-0.285)
(log_model_ful <- glm(dead_cat~sedentary+dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
exp(5*(-0.072))
exp(5*(-0.071))
exp(5*(-0.057))
(log_model_ful_emm <- glm(dead_cat~sedentary*dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(exponentiate = T, conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
(log_model_ful_emm <- glm(dead_cat~sedentary*dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
-0.562-0.111
exp(-0.673)
exp(-0.881-0.796)
exp(-0.26+0.541)
mi_onset_10_cat <- mi_onset_10 %>%
mutate(age_cat = fct_recode(age_cat,
"<50yrs"="1","50-64yrs"="2","65+yrs"="3"),
female_cat=fct_recode(female,"F"="1","M"="0"),
married_cat=fct_recode(married, "yes"="1","no"="0"),
educ_cat=fct_recode(educ,"<HS"="1","HS"="2",">HS"="3"),
dm_cat=fct_recode(dm,"yes"="1","no"="0"),
htn_cat=fct_recode(htn,"yes"="1","no"="0"),
phys_cat=fct_recode(phys_activity,"<1/wk"="0","1-3/wk"="1","4+/wk"="2"),
evermarj_cat=fct_recode(evermarj,"yes"="1","no"="0"),
dead_cat=fct_recode(dead,"yes"="1","no"="0"),
cvdeath_cat=fct_recode(cvdeath,"CVD death"="1","not CVD death"="0"),
sedentary = fct_recode(phys_activity, "yes"="0", "no"="1","no"="2")
) %>%
mutate(dead_cat = fct_rev(dead_cat),
sedentary = fct_rev(sedentary)) %>%
mutate(sedendm = case_when(
phys_activity==0 & dm==1 ~ 1,
phys_activity!=0 & dm==1 ~ 2,
phys_activity==0 & dm!=1 ~ 3,
phys_activity!=0 & dm~=1 ~ 4
mi_onset_10_cat <- mi_onset_10 %>%
mutate(age_cat = fct_recode(age_cat,
"<50yrs"="1","50-64yrs"="2","65+yrs"="3"),
female_cat=fct_recode(female,"F"="1","M"="0"),
married_cat=fct_recode(married, "yes"="1","no"="0"),
educ_cat=fct_recode(educ,"<HS"="1","HS"="2",">HS"="3"),
dm_cat=fct_recode(dm,"yes"="1","no"="0"),
htn_cat=fct_recode(htn,"yes"="1","no"="0"),
phys_cat=fct_recode(phys_activity,"<1/wk"="0","1-3/wk"="1","4+/wk"="2"),
evermarj_cat=fct_recode(evermarj,"yes"="1","no"="0"),
dead_cat=fct_recode(dead,"yes"="1","no"="0"),
cvdeath_cat=fct_recode(cvdeath,"CVD death"="1","not CVD death"="0"),
sedentary = fct_recode(phys_activity, "yes"="0", "no"="1","no"="2")
) %>%
mutate(dead_cat = fct_rev(dead_cat),
sedentary = fct_rev(sedentary)) %>%
mutate(sedendm = case_when(
phys_activity==0 & dm==1 ~ 1,
phys_activity!=0 & dm==1 ~ 2,
phys_activity==0 & dm!=1 ~ 3,
phys_activity!=0 & dm!=1 ~ 4
))
glimpse(mi_onset_10_cat)
#Load packages
pacman::p_load(tidyverse, patchwork, ggsignif,
gtsummary, janitor, rstatix,
scales, flextable, here,rio)
#Source the epicalc package- set this to the file path where you saved the epicalc_v3 file
source(here("code","epicalc_v3.R"))
#Load data
# evansData<-rio::import("data/evans_example_dat.csv", header=T)
mi_onset_10 <- import(here("data","MI_Onset_10.rdata"))
glimpse(mi_onset_10)
skimr::skim(mi_onset_10)
mi_onset_10 <- mi_onset_10 %>% mutate(sedendm = case_when(
phys_activity==0 & dm==1 ~ 1,
phys_activity!=0 & dm==1 ~ 2,
phys_activity==0 & dm!=1 ~ 3,
phys_activity!=0 & dm!=1 ~ 4
))
glimpse(mi_onset_10)
# adjust factor variables
fac_vars <- names(mi_onset_10)[c(1,3:10,12:14)]
mi_onset_10[fac_vars] <- lapply(mi_onset_10[fac_vars],factor)
glimpse(mi_onset_10)
mi_onset_10_cat <- mi_onset_10 %>%
mutate(age_cat = fct_recode(age_cat,
"<50yrs"="1","50-64yrs"="2","65+yrs"="3"),
female_cat=fct_recode(female,"F"="1","M"="0"),
married_cat=fct_recode(married, "yes"="1","no"="0"),
educ_cat=fct_recode(educ,"<HS"="1","HS"="2",">HS"="3"),
dm_cat=fct_recode(dm,"yes"="1","no"="0"),
htn_cat=fct_recode(htn,"yes"="1","no"="0"),
phys_cat=fct_recode(phys_activity,"<1/wk"="0","1-3/wk"="1","4+/wk"="2"),
evermarj_cat=fct_recode(evermarj,"yes"="1","no"="0"),
dead_cat=fct_recode(dead,"yes"="1","no"="0"),
cvdeath_cat=fct_recode(cvdeath,"CVD death"="1","not CVD death"="0"),
sedentary = fct_recode(phys_activity, "yes"="0", "no"="1","no"="2"),
sedendm_cat = fct_recode(sedendm, "sedentary and diabetes"="1",
"no sedentary and diabetes"="2", "sedentary and no diabetes"="3",
"no sedentary and no diabetes"="4")
) %>%
mutate(dead_cat = fct_rev(dead_cat),
sedentary = fct_rev(sedentary))
glimpse(mi_onset_10_cat)
levels(mi_onset_10_cat$sedendm_cat)
mi_onset_10_cat <- mi_onset_10 %>%
mutate(age_cat = fct_recode(age_cat,
"<50yrs"="1","50-64yrs"="2","65+yrs"="3"),
female_cat=fct_recode(female,"F"="1","M"="0"),
married_cat=fct_recode(married, "yes"="1","no"="0"),
educ_cat=fct_recode(educ,"<HS"="1","HS"="2",">HS"="3"),
dm_cat=fct_recode(dm,"yes"="1","no"="0"),
htn_cat=fct_recode(htn,"yes"="1","no"="0"),
phys_cat=fct_recode(phys_activity,"<1/wk"="0","1-3/wk"="1","4+/wk"="2"),
evermarj_cat=fct_recode(evermarj,"yes"="1","no"="0"),
dead_cat=fct_recode(dead,"yes"="1","no"="0"),
cvdeath_cat=fct_recode(cvdeath,"CVD death"="1","not CVD death"="0"),
sedentary = fct_recode(phys_activity, "yes"="0", "no"="1","no"="2"),
sedendm_cat = fct_recode(sedendm, "sedentary and diabetes"="1",
"no sedentary and diabetes"="2", "sedentary and no diabetes"="3",
"no sedentary and no diabetes"="4")
) %>%
mutate(dead_cat = fct_rev(dead_cat),
sedentary = fct_rev(sedentary),
sedendm_cat = fct_rev(sedendm_cat))
levels(mi_onset_10_cat$sedendm_cat)
(log_model_add_emm <- mi_onset_10_cat %>%
glm(dead_cat~sedendm_cat+htn_cat+female_cat+age,
family = binomial(link = "logit")) %>%
tidy(exponentiate=T, conf.int=T) %>%
mutate(across(where(is.numeric),round,digits=3)))
(log_model_add_emm <-  glm(dead_cat~sedendm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat
family = binomial(link = "logit")) %>%
(log_model_add_emm <-  glm(dead_cat~sedendm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(exponentiate=T, conf.int=T) %>%
mutate(across(where(is.numeric),round,digits=3)))
(log_model_add_emm <-  glm(dead_cat~sedendm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(exponentiate=T, conf.int=T) %>%
mutate(across(where(is.numeric),round,digits=3)))
0.241-0.57-0.474+``
0.241-0.57-0.474+1
levels(mi_onset_10_cat$dead_cat)
glimpse(mi_onset_10_cat)
levels(mi_onset_10_cat$dead)
log_model <- glm(dead ~ sedentary + dm_cat +
htn_cat + female_cat + age,
data = mi_onset_10_cat,
family = binomial(link = 'logit'))
summary(log_model)
tidy(log_model)
log_model %>%
tbl_regression(exponentiate = T,
label = list(
sedentary ~ "Sedentary lifestyle at baseline",
dm_cat ~ "Diabetes",
htn_cat ~ "Hypertension",
female_cat ~ "Gender",
age ~ "Age (years)"
)) %>%
bstfun::add_inline_forest_plot()
#Load packages
pacman::p_load(tidyverse, patchwork, ggsignif,
gtsummary, janitor, rstatix,
scales, flextable, here,rio)
#Source the epicalc package- set this to the file path where you saved the epicalc_v3 file
source(here("code","epicalc_v3.R"))
# source("code/epicalc_v3.R")
#Load data
# evansData<-rio::import("data/evans_example_dat.csv", header=T)
mi_onset_10 <- import(here("data","MI_Onset_10.rdata"))
glimpse(mi_onset_10)
skimr::skim(mi_onset_10)
mi_onset_10 <- mi_onset_10 %>% mutate(sedendm = case_when(
phys_activity==0 & dm==1 ~ 1,
phys_activity!=0 & dm==1 ~ 2,
phys_activity==0 & dm!=1 ~ 3,
phys_activity!=0 & dm!=1 ~ 4
))
# adjust factor variables
fac_vars <- names(mi_onset_10)[c(1,3:10,12:14)]
mi_onset_10[fac_vars] <- lapply(mi_onset_10[fac_vars],factor)
mi_onset_10_cat <- mi_onset_10 %>%
mutate(age_cat = fct_recode(age_cat,
"<50yrs"="1","50-64yrs"="2","65+yrs"="3"),
female_cat=fct_recode(female,"F"="1","M"="0"),
married_cat=fct_recode(married, "yes"="1","no"="0"),
educ_cat=fct_recode(educ,"<HS"="1","HS"="2",">HS"="3"),
dm_cat=fct_recode(dm,"yes"="1","no"="0"),
htn_cat=fct_recode(htn,"yes"="1","no"="0"),
phys_cat=fct_recode(phys_activity,"<1/wk"="0","1-3/wk"="1","4+/wk"="2"),
evermarj_cat=fct_recode(evermarj,"yes"="1","no"="0"),
dead_cat=fct_recode(dead,"yes"="1","no"="0"),
cvdeath_cat=fct_recode(cvdeath,"CVD death"="1","not CVD death"="0"),
sedentary = fct_recode(phys_activity, "yes"="0", "no"="1","no"="2"),
sedendm_cat = fct_recode(sedendm, "sedentary and diabetes"="1",
"no sedentary and diabetes"="2", "sedentary and no diabetes"="3",
"no sedentary and no diabetes"="4")
) %>%
mutate(dead_cat = fct_rev(dead_cat),
sedentary = fct_rev(sedentary),
sedendm_cat = fct_rev(sedendm_cat))
log_model %>%
tbl_regression(exponentiate = T,
label = list(
sedentary ~ "Sedentary lifestyle at baseline",
dm_cat ~ "Diabetes",
htn_cat ~ "Hypertension",
female_cat ~ "Gender",
age ~ "Age (years)"
)) %>%
bstfun::add_inline_forest_plot()
log_model <- glm(dead ~ sedentary + dm_cat +
htn_cat + female_cat + age,
data = mi_onset_10_cat,
family = binomial(link = 'logit'))
summary(log_model)
tidy(log_model)
log_model %>%
tbl_regression(exponentiate = T,
label = list(
sedentary ~ "Sedentary lifestyle at baseline",
dm_cat ~ "Diabetes",
htn_cat ~ "Hypertension",
female_cat ~ "Gender",
age ~ "Age (years)"
)) %>%
bstfun::add_inline_forest_plot()
# Q1b
log_model_emm <- glm(dead~sedentary*dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit"))
tidy(log_model_emm)
0.562+0.111
exp(0.673)
exp(0.562)
(log_model_crude <- glm(dead~sedentary,
data = mi_onset_10_cat,
family = binomial(link = 'logit')) %>%
tidy(exponentiate = T, conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
(log_model_agesex <- glm(dead~sedentary+age+female_cat,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(exponentiate = T, conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
(log_model_ful <- glm(dead~sedentary+dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(exponentiate = T, conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
(log_model_ful <- glm(dead~sedentary+dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
exp(0.064*5)
exp(5*0.057)
exp(5*0.071)
(log_model_add_emm <-  glm(dead~sedendm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(exponentiate=T, conf.int=T) %>%
mutate(across(where(is.numeric),round,digits=3)))
(log_model_add_emm <-  glm(dead~sedendm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(#exponentiate=T,
conf.int=T) %>%
mutate(across(where(is.numeric),round,digits=3)))
(log_model_ful_emm <- glm(dead~sedentary*dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
(log_model_ful_emm <- glm(dead~sedentary*dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
exp(0.673)
exp(0.260-0.541)
exp(0.881+0.796)
exp(0.562)
(log_model_ful_emm <- glm(dead~sedentary*dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(exponentiate=T,conf.int = T) %>%
mutate(across(where(is.numeric), round, digits = 3)))
(log_model_add_emm <-  glm(dead~sedendm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit")) %>%
tidy(exponentiate=T,
conf.int=T) %>%
mutate(across(where(is.numeric),round,digits=3)))
4.140-1.760-2.110+1
#Load packages
pacman::p_load(tidyverse, patchwork, ggsignif,
gtsummary, janitor, rstatix,
scales, flextable, here,rio)
#Source the epicalc package- set this to the file path where you saved the epicalc_v3 file
source(here("code","epicalc_v3.R"))
# source("code/epicalc_v3.R")
#Load data
# evansData<-rio::import("data/evans_example_dat.csv", header=T)
mi_onset_10 <- import(here("data","MI_Onset_10.rdata"))
glimpse(mi_onset_10)
skimr::skim(mi_onset_10)
mi_onset_10 <- mi_onset_10 %>% mutate(sedendm = case_when(
phys_activity==0 & dm==1 ~ 1,
phys_activity!=0 & dm==1 ~ 2,
phys_activity==0 & dm!=1 ~ 3,
phys_activity!=0 & dm!=1 ~ 4
))
# adjust factor variables
fac_vars <- names(mi_onset_10)[c(1,3:10,12:14)]
mi_onset_10[fac_vars] <- lapply(mi_onset_10[fac_vars],factor)
mi_onset_10_cat <- mi_onset_10 %>%
mutate(age_cat = fct_recode(age_cat,
"<50yrs"="1","50-64yrs"="2","65+yrs"="3"),
female_cat=fct_recode(female,"F"="1","M"="0"),
married_cat=fct_recode(married, "yes"="1","no"="0"),
educ_cat=fct_recode(educ,"<HS"="1","HS"="2",">HS"="3"),
dm_cat=fct_recode(dm,"yes"="1","no"="0"),
htn_cat=fct_recode(htn,"yes"="1","no"="0"),
phys_cat=fct_recode(phys_activity,"<1/wk"="0","1-3/wk"="1","4+/wk"="2"),
evermarj_cat=fct_recode(evermarj,"yes"="1","no"="0"),
dead_cat=fct_recode(dead,"yes"="1","no"="0"),
cvdeath_cat=fct_recode(cvdeath,"CVD death"="1","not CVD death"="0"),
sedentary = fct_recode(phys_activity, "yes"="0", "no"="1","no"="2"),
sedendm_cat = fct_recode(sedendm, "sedentary and diabetes"="1",
"no sedentary and diabetes"="2", "sedentary and no diabetes"="3",
"no sedentary and no diabetes"="4")
) %>%
mutate(dead_cat = fct_rev(dead_cat),
sedentary = fct_rev(sedentary),
sedendm_cat = fct_rev(sedendm_cat))
# Q1b
log_model_emm <- glm(dead~sedentary*dm_cat+htn_cat+female_cat+age,
data = mi_onset_10_cat,
family = binomial(link = "logit"))
summary(log_model_emm)
tidy(log_model_emm)
# 3 A3 ---------------------------------------------------------------------------------------------------------------
# descriptive table
mi_onset_10_cat %>%
select(age, age_cat, female_cat, married_cat,
educ_cat, dm_cat, htn_cat, sedentary) %>%
tbl_summary(
by = sedentary,
statistic = list(all_continuous() ~ "{mean} ({sd})",
all_categorical() ~ "{n} ({p}%)"),
digits = all_continuous() ~ 3,
type = all_categorical() ~ "categorical",
label = list(
sedentary ~ "Sendentary",
age ~ "Age (years)",
age_cat ~ "Age category",
female_cat ~ "Gender",
married_cat ~ "Marrige status",
educ_cat ~ "Education level",
dm_cat ~ "Diabetes",
htn_cat ~ "Hypertension"
)
) %>% add_p()
#Load packages
pacman::p_load(tidyverse, patchwork, ggsignif,
gtsummary, janitor, rstatix,
scales, flextable, here,rio)
#Source the epicalc package- set this to the file path where you saved the epicalc_v3 file
source(here("code","epicalc_v3.R"))
# source("code/epicalc_v3.R")
#Load data
# evansData<-rio::import("data/evans_example_dat.csv", header=T)
mi_onset_10 <- import(here("data","MI_Onset_10.rdata"))
glimpse(mi_onset_10)
skimr::skim(mi_onset_10)
mi_onset_10 <- mi_onset_10 %>% mutate(sedendm = case_when(
phys_activity==0 & dm==1 ~ 1,
phys_activity!=0 & dm==1 ~ 2,
phys_activity==0 & dm!=1 ~ 3,
phys_activity!=0 & dm!=1 ~ 4
))
# adjust factor variables
fac_vars <- names(mi_onset_10)[c(1,3:10,12:14)]
mi_onset_10[fac_vars] <- lapply(mi_onset_10[fac_vars],factor)
mi_onset_10_cat <- mi_onset_10 %>%
mutate(age_cat = fct_recode(age_cat,
"<50yrs"="1","50-64yrs"="2","65+yrs"="3"),
female_cat=fct_recode(female,"F"="1","M"="0"),
married_cat=fct_recode(married, "yes"="1","no"="0"),
educ_cat=fct_recode(educ,"<HS"="1","HS"="2",">HS"="3"),
dm_cat=fct_recode(dm,"yes"="1","no"="0"),
htn_cat=fct_recode(htn,"yes"="1","no"="0"),
phys_cat=fct_recode(phys_activity,"<1/wk"="0","1-3/wk"="1","4+/wk"="2"),
evermarj_cat=fct_recode(evermarj,"yes"="1","no"="0"),
dead_cat=fct_recode(dead,"yes"="1","no"="0"),
cvdeath_cat=fct_recode(cvdeath,"CVD death"="1","not CVD death"="0"),
sedentary = fct_recode(phys_activity, "yes"="0", "no"="1","no"="2"),
sedendm_cat = fct_recode(sedendm, "sedentary and diabetes"="1",
"no sedentary and diabetes"="2", "sedentary and no diabetes"="3",
"no sedentary and no diabetes"="4")
) %>%
mutate(dead_cat = fct_rev(dead_cat),
sedentary = fct_rev(sedentary),
sedendm_cat = fct_rev(sedendm_cat))
#Load packages
pacman::p_load(tidyverse, patchwork, ggsignif,
gtsummary, janitor, rstatix,
scales, flextable, here,rio)
#Source the epicalc package- set this to the file path where you saved the epicalc_v3 file
source(here("code","epicalc_v3.R"))
# source("code/epicalc_v3.R")
#Load data
# evansData<-rio::import("data/evans_example_dat.csv", header=T)
mi_onset_10 <- import(here("data","MI_Onset_10.rdata"))
glimpse(mi_onset_10)
skimr::skim(mi_onset_10)
mi_onset_10 <- mi_onset_10 %>% mutate(sedendm = case_when(
phys_activity==0 & dm==1 ~ 1,
phys_activity!=0 & dm==1 ~ 2,
phys_activity==0 & dm!=1 ~ 3,
phys_activity!=0 & dm!=1 ~ 4
))
# adjust factor variables
fac_vars <- names(mi_onset_10)[c(1,3:10,12:14)]
mi_onset_10[fac_vars] <- lapply(mi_onset_10[fac_vars],factor)
mi_onset_10_cat <- mi_onset_10 %>%
mutate(age_cat = fct_recode(age_cat,
"<50yrs"="1","50-64yrs"="2","65+yrs"="3"),
female_cat=fct_recode(female,"F"="1","M"="0"),
married_cat=fct_recode(married, "yes"="1","no"="0"),
educ_cat=fct_recode(educ,"<HS"="1","HS"="2",">HS"="3"),
dm_cat=fct_recode(dm,"yes"="1","no"="0"),
htn_cat=fct_recode(htn,"yes"="1","no"="0"),
phys_cat=fct_recode(phys_activity,"<1/wk"="0","1-3/wk"="1","4+/wk"="2"),
evermarj_cat=fct_recode(evermarj,"yes"="1","no"="0"),
dead_cat=fct_recode(dead,"yes"="1","no"="0"),
cvdeath_cat=fct_recode(cvdeath,"CVD death"="1","not CVD death"="0"),
sedentary = fct_recode(phys_activity, "yes"="0", "no"="1","no"="2"),
sedendm_cat = fct_recode(sedendm, "sedentary and diabetes"="1",
"no sedentary and diabetes"="2", "sedentary and no diabetes"="3",
"no sedentary and no diabetes"="4")
) %>%
mutate(dead_cat = fct_rev(dead_cat),
sedentary = fct_rev(sedentary),
sedendm_cat = fct_rev(sedendm_cat))
# 3 A3 ---------------------------------------------------------------------------------------------------------------
# descriptive table
mi_onset_10_cat %>%
select(age, age_cat, female_cat, married_cat,
educ_cat, dm_cat, htn_cat, sedentary) %>%
tbl_summary(
by = sedentary,
statistic = list(all_continuous() ~ "{mean} ({sd})",
all_categorical() ~ "{n} ({p}%)"),
digits = all_continuous() ~ 3,
type = all_categorical() ~ "categorical",
label = list(
sedentary ~ "Sendentary",
age ~ "Age (years)",
age_cat ~ "Age category",
female_cat ~ "Gender",
married_cat ~ "Marrige status",
educ_cat ~ "Education level",
dm_cat ~ "Diabetes",
htn_cat ~ "Hypertension"
)
) %>% add_p()
